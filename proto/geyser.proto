syntax = "proto3";

package geyser;

service GeyserService {
    rpc StreamUpdates(StreamRequest) returns (stream UpdateMessage);
}

message StreamRequest {
    bool include_accounts = 1;
    bool include_transactions = 2;
    bool include_slots = 3;
}

message UpdateMessage {
    oneof update {
        AccountUpdate account_update = 1;
        TransactionUpdate transaction_update = 2;
        SlotUpdate slot_update = 3;
    }
}

message AccountUpdate {
    string pubkey = 1;
    uint64 lamports = 2;
    string owner = 3;
    bytes data = 4;
    uint64 slot = 5;
}

message TransactionUpdate {
    string signature = 1;
    bool is_vote = 2;
    uint64 slot = 3;
    string status = 4;
}

message SlotUpdate {
    uint64 slot = 1;
    string status = 2;
    uint64 parent = 3;
}
